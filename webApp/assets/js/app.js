"use strict";angular.module("app",[]),angular.module("app",["ngRoute"]);var baseUrl="http://localhost:8080/";jQuery(document).ready(function(){$.backstretch("img/1.jpg")});var app=angular.module("app");app.controller("loginCtrl",["$scope","userSvc","$location",function(e,t,n){e.message="",e.login=function(o,r){t.login(o,r).then(function(t){401===t.status?e.message="Invalid user":(window.localStorage.token=t.result.token,n.path("/profile"))})}}]);var app=angular.module("app");app.controller("profileController",["$scope","userSvc",function(e,t){var n=window.localStorage.token;t.getUser(n,function(t){e.username=t.data.username})}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{templateUrl:"dashboard.html"}).when("/register",{templateUrl:"register.html"}).when("/login",{controller:"loginCtrl",templateUrl:"login.html"}).when("/profile",{templateUrl:"profile.html",controller:"profileController"})}]),angular.module("app").service("userSvc",["$http",function(e){var t=this;t.getUser=function(t,n){e.get("/api/users/",{headers:{"X-Auth":t}}).then(function(e){n(e)})},t.login=function(n,o){return e.post("/api/sessions/",{username:n,password:o}).then(function(e){return t.token=e.data,{status:200,result:{token:t.token}}},function(e){return{status:401}})}}]);